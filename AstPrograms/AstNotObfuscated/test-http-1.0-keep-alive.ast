[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'../common'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"http"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"net"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'net'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"check"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"name"},{"type":"Punctuator","value":":"},{"type":"String","value":"'keep-alive, no TE header'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"requests"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"String","value":"'POST / HTTP/1.0\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'Connection: keep-alive\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'\\r\\n'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"String","value":"'POST / HTTP/1.0\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'Connection: keep-alive\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'\\r\\n'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"responses"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"headers"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"String","value":"'Connection'"},{"type":"Punctuator","value":":"},{"type":"String","value":"'keep-alive'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'OK'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"name"},{"type":"Punctuator","value":":"},{"type":"String","value":"'keep-alive, with TE: chunked'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"requests"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"String","value":"'POST / HTTP/1.0\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'Connection: keep-alive\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'TE: chunked\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'\\r\\n'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"String","value":"'POST / HTTP/1.0\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'\\r\\n'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"responses"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"headers"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"String","value":"'Connection'"},{"type":"Punctuator","value":":"},{"type":"String","value":"'keep-alive'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'OK'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"name"},{"type":"Punctuator","value":":"},{"type":"String","value":"'keep-alive, with Transfer-Encoding: chunked'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"requests"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"String","value":"'POST / HTTP/1.0\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'Connection: keep-alive\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'\\r\\n'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"String","value":"'POST / HTTP/1.0\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'\\r\\n'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"responses"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"headers"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"String","value":"'Connection'"},{"type":"Punctuator","value":":"},{"type":"String","value":"'keep-alive'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Transfer-Encoding'"},{"type":"Punctuator","value":":"},{"type":"String","value":"'chunked'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'OK'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"name"},{"type":"Punctuator","value":":"},{"type":"String","value":"'keep-alive, with Content-Length'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"requests"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"String","value":"'POST / HTTP/1.0\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'Connection: keep-alive\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'\\r\\n'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"String","value":"'POST / HTTP/1.0\\r\\n'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'\\r\\n'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"responses"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"headers"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"String","value":"'Connection'"},{"type":"Punctuator","value":":"},{"type":"String","value":"'keep-alive'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Content-Length'"},{"type":"Punctuator","value":":"},{"type":"String","value":"'2'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'OK'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"check"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"tests"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"test"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"tests"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"test"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"http"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createServer"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"serverHandler"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"listen"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":","},{"type":"String","value":"'127.0.0.1'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"client"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"current"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"next"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"check"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"tests"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"slice"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"serverHandler"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"current"},{"type":"Punctuator","value":"+"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"==="},{"type":"Identifier","value":"test"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"responses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"close"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"test"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"responses"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"current"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<  SERVER SENDING RESPONSE'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"writeHead"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"200"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"headers"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"slice"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"-"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"forEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"write"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"end"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"chunks"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":"-"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"client"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"current"},{"type":"Punctuator","value":"==="},{"type":"Identifier","value":"test"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"requests"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"next"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"port"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"port"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"conn"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"net"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createConnection"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"port"},{"type":"Punctuator","value":","},{"type":"String","value":"'127.0.0.1'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"connected"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"connected"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"test"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"requests"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"current"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"String","value":"' > CLIENT SENDING REQUEST'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"conn"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"setEncoding"},{"type":"Punctuator","value":"("},{"type":"String","value":"'utf8'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"conn"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"write"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"onclose"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"String","value":"' > CLIENT CLOSE'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"throw"},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Error"},{"type":"Punctuator","value":"("},{"type":"String","value":"'unexpected close'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"client"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"conn"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'close'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"onclose"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"ondata"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"s"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"String","value":"' > CLIENT ONDATA %j %j'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"s"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"s"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toString"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"current"},{"type":"Punctuator","value":"++"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ctx"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"expectClose"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"conn"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"removeListener"},{"type":"Punctuator","value":"("},{"type":"String","value":"'close'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"onclose"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"conn"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"removeListener"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ondata"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"connected"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"conn"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ondata"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"}]