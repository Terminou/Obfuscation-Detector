[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'../common.js'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"util"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'util'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"bench"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createBenchmark"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"main"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"len"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"102400"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1024"},{"type":"Punctuator","value":"*"},{"type":"Numeric","value":"1024"},{"type":"Punctuator","value":"*"},{"type":"Numeric","value":"16"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'utf'"},{"type":"Punctuator","value":","},{"type":"String","value":"'asc'"},{"type":"Punctuator","value":","},{"type":"String","value":"'buf'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"dur"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"5"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"flags"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'--expose-internals'"},{"type":"Punctuator","value":","},{"type":"String","value":"'--no-warnings'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"main"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"dur"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"len"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"TCP"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"TCPConnectWrap"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"constants"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"TCPConstants"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"binding"},{"type":"Punctuator","value":"("},{"type":"String","value":"'tcp_wrap'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"WriteWrap"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"binding"},{"type":"Punctuator","value":"("},{"type":"String","value":"'stream_wrap'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"PORT"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"PORT"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"serverHandle"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"TCP"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"TCPConstants"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"SERVER"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"serverHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"bind"},{"type":"Punctuator","value":"("},{"type":"String","value":"'127.0.0.1'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PORT"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"fail"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"String","value":"'bind'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"serverHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"listen"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"511"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"fail"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"String","value":"'listen'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"serverHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"onconnection"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"fail"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"String","value":"'connect'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"switch"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"case"},{"type":"String","value":"'buf'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"Buffer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"alloc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"len"},{"type":"Punctuator","value":","},{"type":"String","value":"'x'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"case"},{"type":"String","value":"'utf'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"="},{"type":"String","value":"'Ã¼'"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"repeat"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"len"},{"type":"Punctuator","value":"/"},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"case"},{"type":"String","value":"'asc'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"="},{"type":"String","value":"'x'"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"repeat"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"len"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"default"},{"type":"Punctuator","value":":"},{"type":"Keyword","value":"throw"},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`invalid type: ${"},{"type":"Identifier","value":"type"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"readStart"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"while"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"writeQueueSize"},{"type":"Punctuator","value":"==="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"write"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"write"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"writeReq"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"WriteWrap"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"writeReq"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"async"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"writeReq"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"oncomplete"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"afterWrite"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"switch"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"case"},{"type":"String","value":"'buf'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"writeBuffer"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"writeReq"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"case"},{"type":"String","value":"'utf'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"writeUtf8String"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"writeReq"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"case"},{"type":"String","value":"'asc'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"writeAsciiString"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"writeReq"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"fail"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"String","value":"'write'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"else"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"writeReq"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"async"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"nextTick"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"afterWrite"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"afterWrite"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"status"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"handle"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"status"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"fail"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"status"},{"type":"Punctuator","value":","},{"type":"String","value":"'write'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"while"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"writeQueueSize"},{"type":"Punctuator","value":"==="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"write"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"client"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"dur"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"fail"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"syscall"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"throw"},{"type":"Identifier","value":"util"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_errnoException"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"syscall"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"client"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"dur"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"TCP"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"TCPConstants"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"SOCKET"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"connectReq"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"TCPConnectWrap"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"connect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"connectReq"},{"type":"Punctuator","value":","},{"type":"String","value":"'127.0.0.1'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PORT"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"fail"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"String","value":"'connect'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"connectReq"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"oncomplete"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"bytes"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"onread"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"buffer"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"buffer"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"fail"},{"type":"Punctuator","value":"("},{"type":"String","value":"'read'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"bytes"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"buffer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"byteLength"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"clientHandle"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"readStart"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"bench"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"start"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"setTimeout"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"bench"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"end"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"bytes"},{"type":"Punctuator","value":"*"},{"type":"Numeric","value":"8"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"/"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1024"},{"type":"Punctuator","value":"*"},{"type":"Numeric","value":"1024"},{"type":"Punctuator","value":"*"},{"type":"Numeric","value":"1024"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"exit"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"dur"},{"type":"Punctuator","value":"*"},{"type":"Numeric","value":"1000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"}]