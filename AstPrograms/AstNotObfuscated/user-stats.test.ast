[{"type":"Keyword","value":"import"},{"type":"Identifier","value":"moment"},{"type":"Identifier","value":"from"},{"type":"String","value":"'moment-timezone'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"import"},{"type":"Identifier","value":"sinon"},{"type":"Identifier","value":"from"},{"type":"String","value":"'sinon'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"getUserById"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"from"},{"type":"String","value":"'./user-stats'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"mockUserID"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"mockApp"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"mockUser"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"from"},{"type":"String","value":"'../boot_tests/fixtures'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"clock"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"sinon"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"useFakeTimers"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1454526000000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":"="},{"type":"String","value":"'America/Los_Angeles'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'user stats'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"afterAll"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"clock"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"restore"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'prepUniqueDaysByHours'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return correct epoch when all entries fall into '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'one day in UTC'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 14:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 20:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1438567200000"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return correct epoch when given two identical dates'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1438567200000"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 2 epochs when dates fall into two days in PST'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 14:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 20:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1438567200000"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1438610400000"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 3 epochs when dates fall into three days'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/1/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'3/3/2015 14:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/30/2014 20:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1412107200000"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1425391200000"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1438394400000"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return same but sorted array if all input dates are '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'start of day'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1438387200000"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1425340800000"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1412035200000"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1412035200000"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1425340800000"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1438387200000"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'calcCurrentStreak'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 1 day when today one challenge was completed'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 1 day when today more than one challenge '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'was completed'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 0 days when today 0 challenges were completed'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/11/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 2 days when today and yesterday challenges were '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'completed'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'days'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 3 when today and for two days before user was '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'active'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/11/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 1:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 1:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 3:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/13/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/14/2015 5:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":","},{"type":"String","value":"'days'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'days'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"3"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 1 when there is a 1.5 day long break and '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'dates fall into two days separated by third'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"47"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"11"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 2 when the break is more than 1.5 days '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'but dates fall into two consecutive days'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"40"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return correct count in default timezone UTC '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'given `undefined` timezone'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 2 days when today and yesterday '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'challenges were completed given PST'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'days'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 17 when there is no break in given timezone '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'(but would be the break if in UTC)'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1453174506164"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453175436725"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453252466853"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453294968225"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453383782844"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453431903117"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453471373080"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453594733026"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453645014058"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453746762747"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453747659197"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453748029416"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453818029213"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453951796007"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453988570615"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454069704441"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454203673979"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454294055498"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454333545125"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454415163903"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454519128123"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"tz"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"17"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 4 when there is a break in UTC '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'(but would be no break in PST)'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcCurrentStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1453174506164"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453175436725"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453252466853"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453294968225"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453383782844"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453431903117"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453471373080"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453594733026"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453645014058"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453746762747"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453747659197"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453748029416"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453818029213"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453951796007"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453988570615"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454069704441"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454203673979"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454294055498"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454333545125"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454415163903"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454519128123"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"4"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'calcLongestStreak'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 1 when there is the only one one-day-long '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'streak available'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 4 when there is the only one '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'more-than-one-days-long streak available'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/11/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/13/2015 3:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/14/2015 1:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"4"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 1 when there is only one one-day-long streak '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'and it is today'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 2 when yesterday and today makes longest streak'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'days'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 4 when there is a month long break'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/11/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'10/4/2015 1:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'10/5/2015 5:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'10/6/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'10/7/2015 5:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'11/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"4"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 2 when there is a more than 1.5 days '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'long break of (36 hours)'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/11/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 15:30'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 15:30'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"add"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"37"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/14/2015 22:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/15/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'10/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 4 when the longest streak consist of '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'several same day timestamps'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/11/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 1:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 1:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 3:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/13/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/14/2015 5:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":","},{"type":"String","value":"'days'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'days'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"4"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 4 when there are several longest streaks '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'(same length)'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'8/3/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/11/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 1:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/13/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/14/2015 5:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'10/11/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'10/12/2015 1:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'10/13/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'10/14/2015 5:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"4"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return correct longest streak when there is a very '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'long period'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"cals"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"n"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"100"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"for"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"n"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"++"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"cals"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":","},{"type":"String","value":"'days'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cals"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"n"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return correct longest streak in default timezone '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'UTC given `undefined` timezone'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'days'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"subtract"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":","},{"type":"String","value":"'hours'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 4 when there is the only one more-than-one-days-long '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'streak available given PST'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/11/2015 4:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/13/2015 3:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/14/2015 1:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"4"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 3 when longest streak is 3 in PST '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'(but would be different in default timezone UTC)'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/11/2015 23:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/12/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/13/2015 2:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"String","value":"'9/14/2015 6:00'"},{"type":"Punctuator","value":","},{"type":"String","value":"'M/D/YYYY H:mm'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"3"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return 17 when there is no break in PST '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'(but would be break in UTC) and it is current'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1453174506164"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453175436725"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453252466853"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453294968225"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453383782844"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453431903117"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453471373080"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453594733026"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453645014058"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453746762747"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453747659197"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453748029416"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453818029213"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453951796007"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453988570615"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454069704441"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454203673979"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454294055498"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454333545125"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454415163903"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454519128123"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"tz"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"PST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"17"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return a streak of 4 when there is a break in UTC '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'(but no break in PST)'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"calcLongestStreak"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"prepUniqueDaysByHours"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1453174506164"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453175436725"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453252466853"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453294968225"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453383782844"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453431903117"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453471373080"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453594733026"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453645014058"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453746762747"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453747659197"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453748029416"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453818029213"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453951796007"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1453988570615"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454069704441"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454203673979"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454294055498"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454333545125"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454415163903"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1454519128123"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"moment"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"utc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"4"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'getUserById'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stubUser"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"findById"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"id"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"cb"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"cb"},{"type":"Punctuator","value":"("},{"type":"Null","value":"null"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"id"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"123"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'returns a promise'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"assertions"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"3"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"getUserById"},{"type":"Punctuator","value":"("},{"type":"String","value":"'123'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"stubUser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'function'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"getUserById"},{"type":"Punctuator","value":"("},{"type":"String","value":"'123'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"stubUser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Keyword","value":"catch"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'function'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"getUserById"},{"type":"Punctuator","value":"("},{"type":"String","value":"'123'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"stubUser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Keyword","value":"finally"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'function'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'resolves a user for a given id'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"assertions"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"7"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"getUserById"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"mockUserID"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"mockApp"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"models"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"User"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"user"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"user"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"mockUser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"user"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveProperty"},{"type":"Punctuator","value":"("},{"type":"String","value":"'progressTimestamps'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"user"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveProperty"},{"type":"Punctuator","value":"("},{"type":"String","value":"'completedChallengeCount'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"user"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveProperty"},{"type":"Punctuator","value":"("},{"type":"String","value":"'completedProjectCount'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"user"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveProperty"},{"type":"Punctuator","value":"("},{"type":"String","value":"'completedCertCount'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"user"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveProperty"},{"type":"Punctuator","value":"("},{"type":"String","value":"'completedLegacyCertCount'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"user"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"completedChallenges"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Keyword","value":"catch"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'throws when no user is found'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"noUserError"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Error"},{"type":"Punctuator","value":"("},{"type":"String","value":"'No user found'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"throwyUserModel"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"findById"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"_"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"cb"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"cb"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noUserError"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"getUserById"},{"type":"Punctuator","value":"("},{"type":"String","value":"'not-a-real-id'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"throwyUserModel"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Keyword","value":"catch"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noUserError"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"}]