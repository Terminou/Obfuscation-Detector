[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'../common'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'assert'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"fork"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'child_process'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"fork"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"net"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'net'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"count"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"12"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"argv"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'child'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"needEnd"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"id"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"argv"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"3"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'message'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"m"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[${"},{"type":"Identifier","value":"id"},{"type":"Template","value":"}] got socket ${"},{"type":"Identifier","value":"m"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"m"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"m"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resume"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[${"},{"type":"Identifier","value":"id"},{"type":"Template","value":"}] socket.data ${"},{"type":"Identifier","value":"m"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[${"},{"type":"Identifier","value":"id"},{"type":"Template","value":"}] socket.end ${"},{"type":"Identifier","value":"m"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"m"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'write'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"needEnd"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'close'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"had_error"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[${"},{"type":"Identifier","value":"id"},{"type":"Template","value":"}] socket.close ${"},{"type":"Identifier","value":"had_error"},{"type":"Template","value":"} ${"},{"type":"Identifier","value":"m"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'finish'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[${"},{"type":"Identifier","value":"id"},{"type":"Template","value":"}] socket finished ${"},{"type":"Identifier","value":"m"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'message'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"m"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"m"},{"type":"Punctuator","value":"!=="},{"type":"String","value":"'close'"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[${"},{"type":"Identifier","value":"id"},{"type":"Template","value":"}] got close message`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"needEnd"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"forEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"endMe"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[${"},{"type":"Identifier","value":"id"},{"type":"Template","value":"}] ending ${"},{"type":"Identifier","value":"i"},{"type":"Template","value":"}/${"},{"type":"Identifier","value":"needEnd"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"endMe"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"end"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'disconnect'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[${"},{"type":"Identifier","value":"id"},{"type":"Template","value":"}] process disconnect, ending`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"needEnd"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"forEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"endMe"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[${"},{"type":"Identifier","value":"id"},{"type":"Template","value":"}] ending ${"},{"type":"Identifier","value":"i"},{"type":"Template","value":"}/${"},{"type":"Identifier","value":"needEnd"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"endMe"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"end"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"else"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"child1"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"fork"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"argv"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"["},{"type":"String","value":"'child'"},{"type":"Punctuator","value":","},{"type":"String","value":"'1'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"child2"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"fork"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"argv"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"["},{"type":"String","value":"'child'"},{"type":"Punctuator","value":","},{"type":"String","value":"'2'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"child3"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"fork"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"argv"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"["},{"type":"String","value":"'child'"},{"type":"Punctuator","value":","},{"type":"String","value":"'3'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"net"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createServer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"connected"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"closed"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'connection'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"switch"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"connected"},{"type":"Punctuator","value":"%"},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"case"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"child1"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"send"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"case"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"child1"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"send"},{"type":"Punctuator","value":"("},{"type":"String","value":"'write'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"case"},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"child2"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"send"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"case"},{"type":"Numeric","value":"3"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"child2"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"send"},{"type":"Punctuator","value":"("},{"type":"String","value":"'write'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"case"},{"type":"Numeric","value":"4"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"child3"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"send"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"case"},{"type":"Numeric","value":"5"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"child3"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"send"},{"type":"Punctuator","value":"("},{"type":"String","value":"'write'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"connected"},{"type":"Punctuator","value":"+="},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"socket"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"once"},{"type":"Punctuator","value":"("},{"type":"String","value":"'close'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`[m] socket closed, total ${"},{"type":"Punctuator","value":"++"},{"type":"Identifier","value":"closed"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"connected"},{"type":"Punctuator","value":"==="},{"type":"Identifier","value":"count"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"closeServer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"disconnected"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'listening'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"j"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"count"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"while"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"j"},{"type":"Punctuator","value":"--"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"client"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"net"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"connect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"port"},{"type":"Punctuator","value":","},{"type":"String","value":"'127.0.0.1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"client"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'error'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"String","value":"'[m] CLIENT: error event'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"client"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'close'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"("},{"type":"String","value":"'[m] CLIENT: close event'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"disconnected"},{"type":"Punctuator","value":"+="},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"client"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resume"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"closeEmitted"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'close'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"closeEmitted"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"child1"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"kill"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"child2"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"kill"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"child3"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"kill"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"listen"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":","},{"type":"String","value":"'127.0.0.1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"closeServer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"close"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"setTimeout"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"closeEmitted"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"child1"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"send"},{"type":"Punctuator","value":"("},{"type":"String","value":"'close'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"child2"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"send"},{"type":"Punctuator","value":"("},{"type":"String","value":"'close'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"child3"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"disconnect"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"200"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'exit'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"server"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_workers"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"disconnected"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"count"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"connected"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"count"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"}]