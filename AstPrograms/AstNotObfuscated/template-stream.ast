[{"type":"Keyword","value":"const"},{"type":"Identifier","value":"Transform"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'stream'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"Transform"},{"type":"Keyword","value":"import"},{"type":"Identifier","value":"type"},{"type":"Identifier","value":"TemplateRenderer"},{"type":"Identifier","value":"from"},{"type":"String","value":"'./index'"},{"type":"Keyword","value":"import"},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"ParsedTemplate"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"from"},{"type":"String","value":"'./parse-template'"},{"type":"Keyword","value":"export"},{"type":"Keyword","value":"default"},{"type":"Keyword","value":"class"},{"type":"Identifier","value":"TemplateStream"},{"type":"Keyword","value":"extends"},{"type":"Identifier","value":"Transform"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"started"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"TemplateRenderer"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"ParsedTemplate"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Object"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"constructor"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"TemplateRenderer"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"ParsedTemplate"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Object"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"super"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"started"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderer"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"template"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"||"},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"_transform"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Buffer"},{"type":"Punctuator","value":"|"},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"encoding"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Function"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"started"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"emit"},{"type":"Punctuator","value":"("},{"type":"String","value":"'beforeStart'"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"start"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"start"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"started"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"true"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"links"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderResourceHints"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"links"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"links"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderStyles"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"neck"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"_flush"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Function"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"emit"},{"type":"Punctuator","value":"("},{"type":"String","value":"'beforeEnd'"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderState"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"scripts"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderScripts"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"scripts"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"scripts"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"tail"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"}]