[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'SCE'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'when disabled'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"beforeEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sceProvider"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sceProvider"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"enabled"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should provide the getter for enabled'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"isEnabled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should not wrap/unwrap any value or throw exception on non-string values'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"foo"},{"type":"Punctuator","value":":"},{"type":"String","value":"'bar'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"JS"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"JS"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'IE<11 quirks mode'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"msieBackup"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"beforeEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"msieBackup"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"msie"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"afterEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"msie"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"msieBackup"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"enabled"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"documentMode"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"expectException"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"msie"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"documentMode"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$provide"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$provide"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sceDelegate'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":":"},{"type":"Null","value":"null"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":":"},{"type":"Null","value":"null"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":":"},{"type":"Null","value":"null"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$window"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$injector"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"constructSce"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"sceProvider"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"$SceProvider"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"sceProvider"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"enabled"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"enabled"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"$injector"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"invoke"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"sceProvider"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$get"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"sceProvider"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"expectException"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"constructSce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'iequirks'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Strict Contextual Escaping does not support Internet Explorer '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'information.'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"else"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"constructSce"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should throw an exception when sce is enabled in quirks mode'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"7"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT throw an exception when sce is enabled and in standards mode'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"8"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT throw an exception when sce is enabled and documentMode is undefined'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"undefined"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT throw an exception when sce is disabled even when in quirks mode'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"7"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT throw an exception when sce is disabled and in standards mode'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"8"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT throw an exception when sce is disabled and documentMode is undefined'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"undefined"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'when enabled'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should wrap string values with TrustedValueHolder'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":"="},{"type":"String","value":"'original_value'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'object'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'original_value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"CSS"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'unsafe'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempting to use an unsafe value in a safe context.'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"CSS"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'object'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"CSS"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'original_value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'unsafe'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempting to use an unsafe value in a safe context.'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"URL"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'object'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"URL"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'original_value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"JS"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'object'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"JS"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'original_value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT wrap non-string values'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsCss"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"123"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'itype'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempted to trust a non-string value in a content requiring a string: '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'Context: css'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT wrap unknown contexts'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'unknown1'"},{"type":"Punctuator","value":","},{"type":"String","value":"'123'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'icontext'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempted to trust a value in invalid context. Context: unknown1; Value: 123'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT wrap undefined context'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"undefined"},{"type":"Punctuator","value":","},{"type":"String","value":"'123'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'icontext'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempted to trust a value in invalid context. Context: undefined; Value: 123'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should wrap undefined into undefined'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsHtml"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"undefined"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeUndefined"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should unwrap undefined into undefined'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"undefined"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeUndefined"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should wrap null into null'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsHtml"},{"type":"Punctuator","value":"("},{"type":"Null","value":"null"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Null","value":"null"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should unwrap null into null'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"Null","value":"null"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Null","value":"null"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should wrap \"\" into \"\"'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsHtml"},{"type":"Punctuator","value":"("},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should unwrap \"\" into \"\"'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should unwrap values and return the original'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":"="},{"type":"String","value":"'originalValue'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT unwrap values when the type is different'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":"="},{"type":"String","value":"'originalValue'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"CSS"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'unsafe'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempting to use an unsafe value in a safe context.'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT unwrap values that had not been wrapped'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"TrustedValueHolder"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"trustedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$unwrapTrustedValue"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"trustedValue"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"TrustedValueHolder"},{"type":"Punctuator","value":"("},{"type":"String","value":"'originalValue'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'unsafe'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempting to use an unsafe value in a safe context.'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should implement toString on trusted values'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":"="},{"type":"String","value":"'123'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsHtml"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedHtml"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"wrappedValue"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toString"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"originalValue"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toString"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'replace $sceDelegate'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should override the default $sce.trustAs/valueOf/etc.'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$provide"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$provide"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sceDelegate'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":":"},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"String","value":"'wrapped:'"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"getTrusted"},{"type":"Punctuator","value":":"},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"String","value":"'unwrapped:'"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":":"},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"String","value":"'valueOf:'"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'wrapped:value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"valueOf"},{"type":"Punctuator","value":"("},{"type":"String","value":"'value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'valueOf:value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'unwrapped:value'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'name'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"name"},{"type":"Punctuator","value":":"},{"type":"String","value":"'chirayu'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'unwrapped:chirayu'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce.parseAs'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should parse constant literals as trusted'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'1'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ANY"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'1'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'1'"},{"type":"Punctuator","value":","},{"type":"String","value":"'UNDEFINED'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'true'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'false'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'null'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Null","value":"null"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'undefined'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeUndefined"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'\"string\"'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'string'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should be possible to do one-time binding on a non-concatenable context'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"provideLog"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$watch"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsHtml"},{"type":"Punctuator","value":"("},{"type":"String","value":"'::foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":"+"},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'undefined'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"reset"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"foo"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"String","value":"'trustedValue'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$$watchers"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$$watchers"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'trustedValue'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"reset"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"foo"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"String","value":"'anotherTrustedValue'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should be possible to do one-time binding on a concatenable context'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"provideLog"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$watch"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'::foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":"+"},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'undefined'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"reset"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"foo"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"URL"},{"type":"Punctuator","value":","},{"type":"String","value":"'trustedValue'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$$watchers"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$$watchers"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'trustedValue'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"reset"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"foo"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"URL"},{"type":"Punctuator","value":","},{"type":"String","value":"'anotherTrustedValue'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT parse constant non-literals'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"exprFn"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsJs"},{"type":"Punctuator","value":"("},{"type":"String","value":"'1+1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"exprFn"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrow"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT return untrusted values from expression function'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"exprFn"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"exprFn"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'unsafe'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempting to use an unsafe value in a safe context.'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT return trusted values of the wrong type from expression function'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"exprFn"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"exprFn"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"JS"},{"type":"Punctuator","value":","},{"type":"String","value":"'123'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'unsafe'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempting to use an unsafe value in a safe context.'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return trusted values from expression function'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"exprFn"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"exprFn"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAs"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"HTML"},{"type":"Punctuator","value":","},{"type":"String","value":"'trustedValue'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'trustedValue'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should support shorthand methods'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsHtml"},{"type":"Punctuator","value":"("},{"type":"String","value":"'1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsAny"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeUndefined"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parseAsCss"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsHtml"},{"type":"Punctuator","value":"("},{"type":"String","value":"'1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'unsafe'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempting to use an unsafe value in a safe context.'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sceDelegate resource url policies'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cfg"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"testFn"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sceDelegateProvider"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"isDefined"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cfg"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sceDelegateProvider"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resourceUrlWhitelist"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cfg"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"isDefined"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cfg"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sceDelegateProvider"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resourceUrlBlacklist"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cfg"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"testFn"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should default to \"self\" which allows relative urls'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$document"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo/bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo/bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should reject everything when whitelist is empty'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'#'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: #'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should match against normalized urls'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"RegularExpression","value":"/^foo$/","regex":{"pattern":"^foo$","flags":""}},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should not accept unknown matcher type'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Null","value":"null"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$injector'"},{"type":"Punctuator","value":","},{"type":"String","value":"'modulerr'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"RegExp"},{"type":"Punctuator","value":"("},{"type":"RegularExpression","value":"/Failed to instantiate module function ?\\(\\$sceDelegateProvider\\) due to:\\n/","regex":{"pattern":"Failed to instantiate module function ?\\(\\$sceDelegateProvider\\) due to:\\n","flags":""}},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"source"},{"type":"Punctuator","value":"+"},{"type":"RegularExpression","value":"/[^[]*\\[\\$sce:imatcher] Matchers may only be \"self\", string patterns or RegExp objects/","regex":{"pattern":"[^[]*\\[\\$sce:imatcher] Matchers may only be \"self\", string patterns or RegExp objects","flags":""}},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"source"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'adjustMatcher'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should rewrite regex into regex and add ^ & $ on either end'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"adjustMatcher"},{"type":"Punctuator","value":"("},{"type":"RegularExpression","value":"/a.*b/","regex":{"pattern":"a.*b","flags":""}},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"exec"},{"type":"Punctuator","value":"("},{"type":"String","value":"'a.b'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"adjustMatcher"},{"type":"Punctuator","value":"("},{"type":"RegularExpression","value":"/a.*b/","regex":{"pattern":"a.*b","flags":""}},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"exec"},{"type":"Punctuator","value":"("},{"type":"String","value":"'-a.b-'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"adjustMatcher"},{"type":"Punctuator","value":"("},{"type":"RegularExpression","value":"/^a.*b$/","regex":{"pattern":"^a.*b$","flags":""}},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"exec"},{"type":"Punctuator","value":"("},{"type":"String","value":"'a.b'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"adjustMatcher"},{"type":"Punctuator","value":"("},{"type":"RegularExpression","value":"/^a.*b$/","regex":{"pattern":"^a.*b$","flags":""}},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"exec"},{"type":"Punctuator","value":"("},{"type":"String","value":"'-a.b-'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should should match * and **'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"adjustMatcher"},{"type":"Punctuator","value":"("},{"type":"String","value":"'*://*.example.com/**'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"exec"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://www.example.com/path'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'regex matcher'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should support custom regex'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"RegularExpression","value":"/^http:\\/\\/example\\.com\\/.*/","regex":{"pattern":"^http:\\/\\/example\\.com\\/.*","flags":""}},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'https://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: https://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'https://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: https://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should match entire regex'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"RegularExpression","value":"/https?:\\/\\/example\\.com\\/foo/","regex":{"pattern":"https?:\\/\\/example\\.com\\/foo","flags":""}},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'https://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'https://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/fo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example.com/fo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo2'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example.com/foo2'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'xhttp://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: xhttp://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'string matchers'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should support strings as matchers'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example-com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example-com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo2'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example.com/foo2'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'xhttp://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: xhttp://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should support the * wildcard'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'http://example.com/foo*'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo-bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo-bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example-com/foo:bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example-com/foo:bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example-com/foo/bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example-com/foo/bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example-com/foo.bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example-com/foo.bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example-com/foo?bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example-com/foo?bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example-com/foo&bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example-com/foo&bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example-com/foo;bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example-com/foo;bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should support the ** wildcard'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'http://example.com/foo**'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo-bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo-bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo:1/2.3?4&5-6'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo:1/2.3?4&5-6'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should not accept *** in the string'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'http://***'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Null","value":"null"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$injector'"},{"type":"Punctuator","value":","},{"type":"String","value":"'modulerr'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"RegExp"},{"type":"Punctuator","value":"("},{"type":"RegularExpression","value":"/Failed to instantiate module function ?\\(\\$sceDelegateProvider\\) due to:\\n/","regex":{"pattern":"Failed to instantiate module function ?\\(\\$sceDelegateProvider\\) due to:\\n","flags":""}},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"source"},{"type":"Punctuator","value":"+"},{"type":"RegularExpression","value":"/[^[]*\\[\\$sce:iwcard] Illegal sequence \\*\\*\\* in string matcher\\. {2}String: http:\\/\\/\\*\\*\\*/","regex":{"pattern":"[^[]*\\[\\$sce:iwcard] Illegal sequence \\*\\*\\* in string matcher\\. {2}String: http:\\/\\/\\*\\*\\*","flags":""}},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"source"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'\"self\" matcher'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should support the special string \"self\" in whitelist'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'self'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should support the special string \"self\" in blacklist'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"RegularExpression","value":"/.*/","regex":{"pattern":".*","flags":""}},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'self'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'when the document base URL has changed'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"baseElem"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"cfg"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whitelist"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'self'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blacklist"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"beforeEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"baseElem"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"window"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"document"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createElement"},{"type":"Punctuator","value":"("},{"type":"String","value":"'BASE'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"baseElem"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"setAttribute"},{"type":"Punctuator","value":"("},{"type":"String","value":"'href'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"window"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"location"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"protocol"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'//foo.example.com/path/'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"window"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"document"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"appendChild"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"baseElem"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"afterEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"window"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"document"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"removeChild"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"baseElem"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should allow relative URLs'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cfg"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should allow absolute URLs'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cfg"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'//foo.example.com/bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'//foo.example.com/bar'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should still block some URLs'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cfg"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'//bad.example.com'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'URL: //bad.example.com'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should have blacklist override the whitelist'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'self'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"String","value":"'self'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should support multiple items in both lists'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"runTest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"whiteList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"RegularExpression","value":"/^http:\\/\\/example.com\\/1$/","regex":{"pattern":"^http:\\/\\/example.com\\/1$","flags":""}},{"type":"Punctuator","value":","},{"type":"RegularExpression","value":"/^http:\\/\\/example.com\\/2$/","regex":{"pattern":"^http:\\/\\/example.com\\/2$","flags":""}},{"type":"Punctuator","value":","},{"type":"RegularExpression","value":"/^http:\\/\\/example.com\\/3$/","regex":{"pattern":"^http:\\/\\/example.com\\/3$","flags":""}},{"type":"Punctuator","value":","},{"type":"String","value":"'self'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"blackList"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"RegularExpression","value":"/^http:\\/\\/example.com\\/3$/","regex":{"pattern":"^http:\\/\\/example.com\\/3$","flags":""}},{"type":"Punctuator","value":","},{"type":"RegularExpression","value":"/.*\\/open_redirect/","regex":{"pattern":".*\\/open_redirect","flags":""}},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'same_domain'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'same_domain'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/2'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/2'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/3'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: http://example.com/3'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'open_redirect'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'insecurl'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Blocked loading resource from url not allowed by $sceDelegate policy.  URL: open_redirect'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'URL-context sanitization'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should sanitize values that are not whitelisted'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedMediaUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'unsafe:javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'unsafe:javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should not sanitize values that are whitelisted'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedMediaUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should not sanitize trusted values'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedMediaUrl"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsMediaUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedMediaUrl"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedMediaUrl"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedUrl"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsMediaUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'unsafe:javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedUrl"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedUrl"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:foo'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should use the $$sanitizeUri'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"$$sanitizeUri"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$$sanitizeUri'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"and"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"returnValue"},{"type":"Punctuator","value":"("},{"type":"String","value":"'someSanitizedUrl'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$provide"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$provide"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$$sanitizeUri'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$$sanitizeUri"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedMediaUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'someUrl'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'someSanitizedUrl'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$$sanitizeUri"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledOnceWith"},{"type":"Punctuator","value":"("},{"type":"String","value":"'someUrl'"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$$sanitizeUri"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"calls"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"reset"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'someUrl'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'someSanitizedUrl'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$$sanitizeUri"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledOnceWith"},{"type":"Punctuator","value":"("},{"type":"String","value":"'someUrl'"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'sanitizing html'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'when $sanitize is NOT available'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should throw an exception for getTrusted(string) values'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedHtml"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<b></b>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$sce'"},{"type":"Punctuator","value":","},{"type":"String","value":"'unsafe'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Attempting to use an unsafe value in a safe context.'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'when $sanitize is available'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"beforeEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"String","value":"'ngSanitize'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should sanitize html using $sanitize'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getTrustedHtml"},{"type":"Punctuator","value":"("},{"type":"String","value":"'a<xxx><B>b</B></xxx>c'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'a<b>b</b>c'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"}]