[{"type":"Keyword","value":"import"},{"type":"Identifier","value":"Vue"},{"type":"Identifier","value":"from"},{"type":"String","value":"'../../dist/vue.runtime.common.js'"},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"compileWithWebpack"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"from"},{"type":"String","value":"'./compile-with-webpack'"},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"from"},{"type":"String","value":"'../../packages/vue-server-renderer'"},{"type":"Keyword","value":"import"},{"type":"Identifier","value":"VueSSRClientPlugin"},{"type":"Identifier","value":"from"},{"type":"String","value":"'../../packages/vue-server-renderer/client-plugin'"},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createRenderer"},{"type":"Identifier","value":"as"},{"type":"Identifier","value":"createBundleRenderer"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"from"},{"type":"String","value":"'./ssr-bundle-render.spec.js'"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"defaultTemplate"},{"type":"Punctuator","value":"="},{"type":"Template","value":"`<html><head></head><body><!--vue-ssr-outlet--></body></html>`"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"interpolateTemplate"},{"type":"Punctuator","value":"="},{"type":"Template","value":"`<html><head><title>{{ title }}</title></head><body><!--vue-ssr-outlet-->{{{ snippet }}}</body></html>`"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"generateClientManifest"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"file"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"cb"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"compileWithWebpack"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"file"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"output"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"path"},{"type":"Punctuator","value":":"},{"type":"String","value":"'/'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"publicPath"},{"type":"Punctuator","value":":"},{"type":"String","value":"'/'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"filename"},{"type":"Punctuator","value":":"},{"type":"String","value":"'[name].js'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"optimization"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runtimeChunk"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"name"},{"type":"Punctuator","value":":"},{"type":"String","value":"'manifest'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"plugins"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"VueSSRClientPlugin"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"fs"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"cb"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"JSON"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"parse"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"fs"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"readFileSync"},{"type":"Punctuator","value":"("},{"type":"String","value":"'/vue-ssr-client-manifest.json'"},{"type":"Punctuator","value":","},{"type":"String","value":"'utf-8'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"createRendererWithManifest"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"file"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"options"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"cb"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"options"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'function'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"cb"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"options"},{"type":"Identifier","value":"options"},{"type":"Punctuator","value":"="},{"type":"Null","value":"null"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"generateClientManifest"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"file"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"clientManifest"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createBundleRenderer"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"file"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"Object"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"assign"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"asBundle"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"defaultTemplate"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"clientManifest"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"options"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"cb"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'SSR: template option'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToString'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"defaultTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<style>h1 { color: red }</style>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"styles"},{"type":"Template","value":"}</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">hi</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToString with interpolation'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"interpolateTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"title"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<script>hacks</script>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"snippet"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>foo</div>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<style>h1 { color: red }</style>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<title>&lt;script&gt;hacks&lt;/script&gt;</title>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"styles"},{"type":"Template","value":"}</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">hi</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div>foo</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToString with interpolation and context.rendered'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"interpolateTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"title"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<script>hacks</script>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"snippet"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>foo</div>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<style>h1 { color: red }</style>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"rendered"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<title>&lt;script&gt;hacks&lt;/script&gt;</title>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"styles"},{"type":"Template","value":"}</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">hi</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div>foo</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToString w/ template function'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"content"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Template","value":"`<html><head>${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}</head>${"},{"type":"Identifier","value":"content"},{"type":"Template","value":"}</html>`"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}</head><div data-server-rendered=\"true\">hi</div></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToString w/ template function returning Promise'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"content"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Promise"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"setTimeout"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}</head>${"},{"type":"Identifier","value":"content"},{"type":"Template","value":"}</html>`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}</head><div data-server-rendered=\"true\">hi</div></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToString w/ template function returning Promise w/ rejection'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Promise"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"reject"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"setTimeout"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"reject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Error"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`foo`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"message"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`foo`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeUndefined"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToStream'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"defaultTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<style>h1 { color: red }</style>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"="},{"type":"String","value":"''"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"styles"},{"type":"Template","value":"}</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">hi</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToStream with interpolation'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"interpolateTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"title"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<script>hacks</script>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"snippet"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>foo</div>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<style>h1 { color: red }</style>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"="},{"type":"String","value":"''"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<title>&lt;script&gt;hacks&lt;/script&gt;</title>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"styles"},{"type":"Template","value":"}</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">hi</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div>foo</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToStream with interpolation and context.rendered'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"interpolateTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"title"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<script>hacks</script>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"snippet"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>foo</div>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<style>h1 { color: red }</style>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"rendered"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"="},{"type":"String","value":"''"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<title>&lt;script&gt;hacks&lt;/script&gt;</title>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"styles"},{"type":"Template","value":"}</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">hi</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div>foo</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'bundleRenderer + renderToString'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createBundleRenderer"},{"type":"Punctuator","value":"("},{"type":"String","value":"'app.js'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"asBundle"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"defaultTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<style>h1 { color: red }</style>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"url"},{"type":"Punctuator","value":":"},{"type":"String","value":"'/test'"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"styles"},{"type":"Template","value":"}</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">/test</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"msg"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'hello'"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'bundleRenderer + renderToStream'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createBundleRenderer"},{"type":"Punctuator","value":"("},{"type":"String","value":"'app.js'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"asBundle"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"defaultTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<style>h1 { color: red }</style>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"url"},{"type":"Punctuator","value":":"},{"type":"String","value":"'/test'"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"="},{"type":"String","value":"''"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toString"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"styles"},{"type":"Template","value":"}</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">/test</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"msg"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'hello'"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"expectedHTMLWithManifest"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"options"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Template","value":"`<html><head>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<link rel=\"preload\" href=\"/manifest.js\" as=\"script\">`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<link rel=\"preload\" href=\"/main.js\" as=\"script\">`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<link rel=\"preload\" href=\"/0.js\" as=\"script\">`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<link rel=\"preload\" href=\"/test.css\" as=\"style\">`"},{"type":"Punctuator","value":"+"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"options"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"preloadOtherAssets"},{"type":"Punctuator","value":"?"},{"type":"Template","value":"`<link rel=\"preload\" href=\"/test.png\" as=\"image\">`"},{"type":"Punctuator","value":":"},{"type":"Template","value":"``"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"+"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"options"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"preloadOtherAssets"},{"type":"Punctuator","value":"?"},{"type":"Template","value":"`<link rel=\"preload\" href=\"/test.woff2\" as=\"font\" type=\"font/woff2\" crossorigin>`"},{"type":"Punctuator","value":":"},{"type":"Template","value":"``"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"+"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"options"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"noPrefetch"},{"type":"Punctuator","value":"?"},{"type":"Template","value":"``"},{"type":"Punctuator","value":":"},{"type":"Template","value":"`<link rel=\"prefetch\" href=\"/1.js\">`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<link rel=\"stylesheet\" href=\"/test.css\">`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\"><div>async test.woff2 test.png</div></div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.${"},{"type":"Identifier","value":"options"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"stateKey"},{"type":"Punctuator","value":"||"},{"type":"String","value":"'__INITIAL_STATE__'"},{"type":"Template","value":"}={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script src=\"/manifest.js\" defer></script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script src=\"/0.js\" defer></script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script src=\"/main.js\" defer></script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Identifier","value":"createClientManifestAssertions"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"createClientManifestAssertions"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"createClientManifestAssertions"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"runInNewContext"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'bundleRenderer + renderToString + clientManifest ()'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createRendererWithManifest"},{"type":"Punctuator","value":"("},{"type":"String","value":"'split.js'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runInNewContext"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"expectedHTMLWithManifest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'bundleRenderer + renderToStream + clientManifest + shouldPreload'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createRendererWithManifest"},{"type":"Punctuator","value":"("},{"type":"String","value":"'split.js'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runInNewContext"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"shouldPreload"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"file"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'image'"},{"type":"Punctuator","value":"||"},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'script'"},{"type":"Punctuator","value":"||"},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'font'"},{"type":"Punctuator","value":"||"},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'style'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"="},{"type":"String","value":"''"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toString"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"expectedHTMLWithManifest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"preloadOtherAssets"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'bundleRenderer + renderToStream + clientManifest + shouldPrefetch'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createRendererWithManifest"},{"type":"Punctuator","value":"("},{"type":"String","value":"'split.js'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runInNewContext"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"shouldPrefetch"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"file"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"type"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'script'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"="},{"type":"String","value":"''"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toString"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"expectedHTMLWithManifest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"noPrefetch"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'bundleRenderer + renderToString + clientManifest + inject: false'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createRendererWithManifest"},{"type":"Punctuator","value":"("},{"type":"String","value":"'split.js'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runInNewContext"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Template","value":"`<html>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<head>{{{ renderResourceHints() }}}{{{ renderStyles() }}}</head>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<body><!--vue-ssr-outlet-->{{{ renderState({ windowKey: '__FOO__', contextKey: 'foo' }) }}}{{{ renderScripts() }}}</body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</html>`"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"foo"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"expectedHTMLWithManifest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"stateKey"},{"type":"Punctuator","value":":"},{"type":"String","value":"'__FOO__'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'bundleRenderer + renderToString + clientManifest + no template'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createRendererWithManifest"},{"type":"Punctuator","value":"("},{"type":"String","value":"'split.js'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"runInNewContext"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Null","value":"null"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"foo"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"customOutput"},{"type":"Punctuator","value":"="},{"type":"Template","value":"`<html><head>${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderResourceHints"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderStyles"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Template","value":"}</head><body>${"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderState"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"windowKey"},{"type":"Punctuator","value":":"},{"type":"String","value":"'__FOO__'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"contextKey"},{"type":"Punctuator","value":":"},{"type":"String","value":"'foo'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderScripts"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Template","value":"}</body></html>`"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"customOutput"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"expectedHTMLWithManifest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"stateKey"},{"type":"Punctuator","value":":"},{"type":"String","value":"'__FOO__'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'whitespace insensitive interpolation'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"interpolateTemplate"},{"type":"Punctuator","value":"="},{"type":"Template","value":"`<html><head><title>{{title}}</title></head><body><!--vue-ssr-outlet-->{{{snippet}}}</body></html>`"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"interpolateTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"title"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<script>hacks</script>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"snippet"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>foo</div>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"head"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<meta name=\"viewport\" content=\"width=device-width\">'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"styles"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<style>h1 { color: red }</style>'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<title>&lt;script&gt;hacks&lt;/script&gt;</title>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"head"},{"type":"Template","value":"}${"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"styles"},{"type":"Template","value":"}</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">hi</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script>window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div>foo</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToString + nonce'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"interpolateTemplate"},{"type":"Punctuator","value":"="},{"type":"Template","value":"`<html><head><title>hello</title></head><body><!--vue-ssr-outlet--></body></html>`"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"interpolateTemplate"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"nonce"},{"type":"Punctuator","value":":"},{"type":"String","value":"'4AEemGb0xJptoIGFP3Nd'"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<html><head>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<title>hello</title>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</head><body>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<div data-server-rendered=\"true\">hi</div>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`<script nonce=\"4AEemGb0xJptoIGFP3Nd\">window.__INITIAL_STATE__={\"a\":1}</script>`"},{"type":"Punctuator","value":"+"},{"type":"Template","value":"`</body></html>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'renderToString + custom serializer'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"expected"},{"type":"Punctuator","value":"="},{"type":"Template","value":"`{\"foo\":123}`"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"defaultTemplate"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"serializer"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Identifier","value":"expected"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"state"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"renderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"renderToString"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"String","value":"'<div>hi</div>'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"context"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeNull"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`<script>window.__INITIAL_STATE__=${"},{"type":"Identifier","value":"expected"},{"type":"Template","value":"}</script>`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"}]