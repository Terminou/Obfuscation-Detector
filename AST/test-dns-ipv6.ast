[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'../common'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'../common/internet'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"hasIPv6"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"skip"},{"type":"Punctuator","value":"("},{"type":"String","value":"'this test, no IPv6 support'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'assert'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'dns'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"net"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'net'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"dnsPromises"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"promises"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"isIPv6"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"net"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"isIPv6"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"running"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"queue"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"TEST"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"f"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"next"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"f"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"queue"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"shift"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"f"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"running"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"f"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"name"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"f"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"running"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"process"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"nextTick"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"next"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"queue"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"f"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"running"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"next"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"checkWrap"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'object'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"TEST"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"async"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"test_resolve6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":">"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"for"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"++"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"isIPv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"await"},{"type":"Identifier","value":"dnsPromises"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resolve6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_HOST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resolve6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_HOST"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ips"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ifError"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ips"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"checkWrap"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"TEST"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"async"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"test_reverse_ipv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":">"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"for"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"++"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"i"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"==="},{"type":"String","value":"'string'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"await"},{"type":"Identifier","value":"dnsPromises"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"reverse"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_IP"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"reverse"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_IP"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"domains"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ifError"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"domains"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"checkWrap"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"TEST"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"async"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"test_lookup_ipv6_explicit"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"isIPv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"await"},{"type":"Identifier","value":"dnsPromises"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookup"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_HOST"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookup"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_HOST"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ifError"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"checkWrap"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"TEST"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"async"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"test_lookup_ipv6_explicit_object"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"isIPv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"await"},{"type":"Identifier","value":"dnsPromises"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookup"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_HOST"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookup"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_HOST"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ifError"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"checkWrap"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"TEST"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"test_lookup_ipv6_hint"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookup"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_HOST"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"hints"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"V4MAPPED"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"isFreeBSD"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Keyword","value":"instanceof"},{"type":"Identifier","value":"Error"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"code"},{"type":"Punctuator","value":","},{"type":"String","value":"'EAI_BADFLAGS'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"hostname"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET_HOST"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"RegularExpression","value":"/getaddrinfo EAI_BADFLAGS/","regex":{"pattern":"getaddrinfo EAI_BADFLAGS","flags":""}},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"test"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"message"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ifError"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"isIPv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"checkWrap"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"TEST"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"async"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"test_lookup_ip_ipv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"isIPv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"await"},{"type":"Identifier","value":"dnsPromises"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookup"},{"type":"Punctuator","value":"("},{"type":"String","value":"'::1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookup"},{"type":"Punctuator","value":"("},{"type":"String","value":"'::1'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ifError"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"checkWrap"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"TEST"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"async"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"test_lookup_all_ipv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"isArray"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":">"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"forEach"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ok"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"isIPv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Template","value":"`Invalid IPv6: ${"},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"address"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toString"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Template","value":"}`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ip"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"await"},{"type":"Identifier","value":"dnsPromises"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookup"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_HOST"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"all"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookup"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"addresses"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"INET6_HOST"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"all"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"family"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"6"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ips"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ifError"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"validateResult"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ips"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"checkWrap"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"TEST"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"test_lookupservice_ip_ipv6"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"dns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lookupService"},{"type":"Punctuator","value":"("},{"type":"String","value":"'::1'"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"80"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"host"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"service"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"code"},{"type":"Punctuator","value":","},{"type":"String","value":"'ENOTFOUND'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"host"},{"type":"Punctuator","value":","},{"type":"String","value":"'string'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"host"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"String","value":"'http'"},{"type":"Punctuator","value":","},{"type":"String","value":"'www'"},{"type":"Punctuator","value":","},{"type":"String","value":"'80'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"includes"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"service"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"checkWrap"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"req"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"}]