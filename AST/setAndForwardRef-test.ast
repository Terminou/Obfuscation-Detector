[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'React'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"ReactTestRenderer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'react-test-renderer'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"setAndForwardRef"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'setAndForwardRef'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'setAndForwardRef'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"innerFuncCalled"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"outerFuncCalled"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"class"},{"type":"Identifier","value":"ForwardedComponent"},{"type":"Keyword","value":"extends"},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"Component"},{"type":"Punctuator","value":"<"},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"||"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"testFunc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"innerFuncCalled"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"render"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Null","value":"null"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"type"},{"type":"Identifier","value":"Props"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$ReadOnly"},{"type":"Punctuator","value":"<"},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"|"},{"type":"Identifier","value":"callFunc"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"?"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"forwardedRef"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"Ref"},{"type":"Punctuator","value":"<"},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"ForwardedComponent"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"|"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"class"},{"type":"Identifier","value":"TestComponent"},{"type":"Keyword","value":"extends"},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"Component"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"Props"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"_nativeRef"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"?"},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ElementRef"},{"type":"Punctuator","value":"<"},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"ForwardedComponent"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"="},{"type":"Null","value":"null"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"_setNativeRef"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"setAndForwardRef"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"getForwardedRef"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"props"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"forwardedRef"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"setLocalRef"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_nativeRef"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"componentDidMount"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"props"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"callFunc"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"outerFuncCalled"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_nativeRef"},{"type":"Punctuator","value":"&&"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_nativeRef"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testFunc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"render"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"ForwardedComponent"},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_setNativeRef"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"/"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"TestComponentWithRef"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"forwardRef"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"props"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"TestComponent"},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"..."},{"type":"Identifier","value":"props"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"forwardedRef"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"/"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"beforeEach"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"innerFuncCalled"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"outerFuncCalled"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should forward refs (function-based)'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"testRef"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"?"},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ElementRef"},{"type":"Punctuator","value":"<"},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"ForwardedComponent"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"="},{"type":"Null","value":"null"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"ReactTestRenderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"create"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"TestComponentWithRef"},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"testRef"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"/"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"val"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"testRef"},{"type":"Punctuator","value":"&&"},{"type":"Identifier","value":"testRef"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testFunc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"innerFuncCalled"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"val"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should forward refs (createRef-based)'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"createdRef"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createRef"},{"type":"Punctuator","value":"<"},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"ForwardedComponent"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"ReactTestRenderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"create"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"TestComponentWithRef"},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createdRef"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"/"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"val"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createdRef"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"current"},{"type":"Punctuator","value":"&&"},{"type":"Identifier","value":"createdRef"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"current"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testFunc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"innerFuncCalled"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"val"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should forward refs (string-based)'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"class"},{"type":"Identifier","value":"Test"},{"type":"Keyword","value":"extends"},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"Component"},{"type":"Punctuator","value":"<"},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"||"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"refs"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"$ReadOnly"},{"type":"Punctuator","value":"<"},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"|"},{"type":"Identifier","value":"stringRef"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"?"},{"type":"Identifier","value":"React"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"ElementRef"},{"type":"Punctuator","value":"<"},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"ForwardedComponent"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"|"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"componentDidMount"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"refs"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"stringRef"},{"type":"Punctuator","value":"&&"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"refs"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"stringRef"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testFunc"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"render"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"TestComponentWithRef"},{"type":"Identifier","value":"ref"},{"type":"Punctuator","value":"="},{"type":"String","value":"\"stringRef\""},{"type":"Punctuator","value":"/"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"ReactTestRenderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"create"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"Test"},{"type":"Punctuator","value":"/"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"innerFuncCalled"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should be able to use the ref from inside of the forwarding class'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Identifier","value":"ReactTestRenderer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"create"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"TestComponentWithRef"},{"type":"Identifier","value":"callFunc"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"/"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrow"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"innerFuncCalled"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"outerFuncCalled"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"}]