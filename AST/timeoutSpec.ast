[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$timeout'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"beforeEach"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"provideLog"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should delegate functions to $browser.defer'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"counter"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"counter"},{"type":"Punctuator","value":"++"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"counter"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"defer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"counter"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"defer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowError"},{"type":"Punctuator","value":"("},{"type":"String","value":"'No deferred tasks to be flushed'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"counter"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should call $apply after each callback is executed'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"spyOn"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"String","value":"'$apply'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"and"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"callThrough"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledOnce"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"calls"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"reset"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledTimes"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT call $apply if skipApply is set to true'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"spyOn"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"String","value":"'$apply'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"and"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"callThrough"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"12"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT call $evalAsync or $digest if invokeApply is set to false'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"evalAsyncSpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"spyOn"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"String","value":"'$evalAsync'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"and"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"callThrough"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"digestSpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"spyOn"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"String","value":"'$digest'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"and"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"callThrough"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"fulfilledSpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'fulfilled'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"fulfilledSpy"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"1000"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"fulfilledSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledOnce"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"evalAsyncSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"digestSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should allow you to specify the delay time'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"defer"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"spyOn"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":","},{"type":"String","value":"'defer'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"123"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"defer"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledTimes"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"defer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"calls"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mostRecent"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"args"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"123"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return a promise which will be resolved with return value of the timeout callback'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'timeout'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"String","value":"'buba'"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'promise success: '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"fn"},{"type":"Punctuator","value":"("},{"type":"String","value":"'promise error'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"String","value":"'timeout'"},{"type":"Punctuator","value":","},{"type":"String","value":"'promise success: buba'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should forget references to deferreds when callback called even if skipApply is true'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"spyOn"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"defer"},{"type":"Punctuator","value":","},{"type":"String","value":"'cancel'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"and"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"callThrough"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise2"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"100"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should allow the `fn` parameter to be optional'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'promise success: '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"fn"},{"type":"Punctuator","value":"("},{"type":"String","value":"'promise error'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"String","value":"'promise success: undefined'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"reset"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'promise success: '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"fn"},{"type":"Punctuator","value":"("},{"type":"String","value":"'promise error'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"500"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"500"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"String","value":"'promise success: undefined'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should pass the timeout arguments in the timeout callback'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"task1"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'Nappa'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"task2"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'Vegeta'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task1"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"9000"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"String","value":"'What does'"},{"type":"Punctuator","value":","},{"type":"String","value":"'the timeout'"},{"type":"Punctuator","value":","},{"type":"String","value":"'say about'"},{"type":"Punctuator","value":","},{"type":"String","value":"'its delay level'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"deferredFns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task2"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"9001"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":","},{"type":"String","value":"'It\\'s'"},{"type":"Punctuator","value":","},{"type":"String","value":"'over'"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"9000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"deferredFns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"9000"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":","},{"type":"String","value":"'What!'"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"9000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'There\\'s no way that can be right! '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"fn"},{"type":"Punctuator","value":"("},{"type":"String","value":"'It can\\'t!'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"deferredFns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"3"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"9000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledWith"},{"type":"Punctuator","value":"("},{"type":"String","value":"'What does'"},{"type":"Punctuator","value":","},{"type":"String","value":"'the timeout'"},{"type":"Punctuator","value":","},{"type":"String","value":"'say about'"},{"type":"Punctuator","value":","},{"type":"String","value":"'its delay level'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledWith"},{"type":"Punctuator","value":"("},{"type":"String","value":"'It\\'s'"},{"type":"Punctuator","value":","},{"type":"String","value":"'over'"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"9000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"9000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"String","value":"'There\\'s no way that can be right! undefined'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'exception handling'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"beforeEach"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$exceptionHandlerProvider"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$exceptionHandlerProvider"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mode"},{"type":"Punctuator","value":"("},{"type":"String","value":"'log'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should delegate exception to the $exceptionHandler service'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$exceptionHandler"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"throw"},{"type":"String","value":"'Test Error'"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$exceptionHandler"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"errors"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$exceptionHandler"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"errors"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"String","value":"'Test Error'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Possibly unhandled rejection: Test Error'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should call $apply even if an exception is thrown in callback'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"spyOn"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"String","value":"'$apply'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"and"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"callThrough"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"throw"},{"type":"String","value":"'Test Error'"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"applySpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should reject the timeout promise when an exception is thrown in the timeout callback'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"throw"},{"type":"String","value":"'Some Error'"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"fn"},{"type":"Punctuator","value":"("},{"type":"String","value":"'success'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"reason"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'error: '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"reason"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'error: Some Error'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should pass the timeout arguments in the timeout callback even if an exception is thrown'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"arg"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"throw"},{"type":"Identifier","value":"arg"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"9000"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"String","value":"'Some Arguments'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise2"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"arg1"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"args2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"throw"},{"type":"Identifier","value":"arg1"},{"type":"Punctuator","value":"+"},{"type":"String","value":"' '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"args2"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"9001"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":","},{"type":"String","value":"'Are Meant'"},{"type":"Punctuator","value":","},{"type":"String","value":"'To Be Thrown'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"fn"},{"type":"Punctuator","value":"("},{"type":"String","value":"'success'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"reason"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'error: '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"reason"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise2"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"fn"},{"type":"Punctuator","value":"("},{"type":"String","value":"'success'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"reason"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'error: '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"reason"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"9000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'error: Some Arguments'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'error: Some Arguments; error: Are Meant To Be Thrown'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should forget references to relevant deferred even when exception is thrown'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"spyOn"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"defer"},{"type":"Punctuator","value":","},{"type":"String","value":"'cancel'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"and"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"callThrough"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"throw"},{"type":"String","value":"'Test Error'"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'cancel'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should cancel tasks'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"task1"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'task1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"task2"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'task2'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"task3"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'task3'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"task4"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'task4'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"promise3"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"promise4"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise3"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task3"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"333"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise4"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"333"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise3"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task4"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise3"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise4"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledOnce"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task3"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task4"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should cancel the promise'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'promise success: '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'promise error: '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"note"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":"("},{"type":"String","value":"'promise update: '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"note"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"log"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"["},{"type":"String","value":"'promise error: canceled'"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should return true if a task was successfully canceled'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"task1"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'task1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"task2"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'task2'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"promise2"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"promise2"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"task2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise2"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should not throw an error when given an undefined promise'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should throw an error when given a non-$timeout promise'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$timeout'"},{"type":"Punctuator","value":","},{"type":"String","value":"'badprom'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should forget references to relevant deferred'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"spyOn"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"defer"},{"type":"Punctuator","value":","},{"type":"String","value":"'cancel'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"and"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"callThrough"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"noop"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledOnce"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"promise"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"cancelSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalledOnce"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should not trigger digest when cancelled'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"watchSpy"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"jasmine"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"createSpy"},{"type":"Punctuator","value":"("},{"type":"String","value":"'watchSpy'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$watch"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"watchSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"t"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$timeout"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"cancel"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"t"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$browser"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"defer"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"flush"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowError"},{"type":"Punctuator","value":"("},{"type":"String","value":"'No deferred tasks to be flushed'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"watchSpy"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toHaveBeenCalled"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"}]