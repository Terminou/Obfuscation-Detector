[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"invariant"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'invariant'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"export"},{"type":"Identifier","value":"type"},{"type":"Identifier","value":"ViewToken"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"item"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"any"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"key"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"index"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"?"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"isViewable"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"section"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"any"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"export"},{"type":"Identifier","value":"type"},{"type":"Identifier","value":"ViewabilityConfigCallbackPair"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"viewabilityConfig"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"ViewabilityConfig"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"onViewableItemsChanged"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"info"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"viewableItems"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"ViewToken"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"changed"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"ViewToken"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Keyword","value":"void"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"export"},{"type":"Identifier","value":"type"},{"type":"Identifier","value":"ViewabilityConfig"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"|"},{"type":"Identifier","value":"minimumViewTime"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewAreaCoveragePercentThreshold"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"itemVisiblePercentThreshold"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"waitForInteraction"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"|"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"class"},{"type":"Identifier","value":"ViewabilityHelper"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"_config"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"ViewabilityConfig"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"_hasInteracted"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"_timers"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Set"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Set"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"_viewableIndices"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"_viewableItems"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Map"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ViewToken"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Map"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"constructor"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"config"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"ViewabilityConfig"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"viewAreaCoveragePercentThreshold"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_config"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"config"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"dispose"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_timers"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"forEach"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"clearTimeout"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"computeViewableItems"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"itemCount"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"scrollOffset"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"getFrameMetrics"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"index"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"offset"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderRange"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"first"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"last"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"itemVisiblePercentThreshold"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewAreaCoveragePercentThreshold"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_config"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"viewAreaMode"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"viewAreaCoveragePercentThreshold"},{"type":"Punctuator","value":"!="},{"type":"Null","value":"null"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"viewablePercentThreshold"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"viewAreaMode"},{"type":"Punctuator","value":"?"},{"type":"Identifier","value":"viewAreaCoveragePercentThreshold"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"itemVisiblePercentThreshold"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"invariant"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewablePercentThreshold"},{"type":"Punctuator","value":"!="},{"type":"Null","value":"null"},{"type":"Punctuator","value":"&&"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"itemVisiblePercentThreshold"},{"type":"Punctuator","value":"!="},{"type":"Null","value":"null"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"!=="},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewAreaCoveragePercentThreshold"},{"type":"Punctuator","value":"!="},{"type":"Null","value":"null"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"String","value":"'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"itemCount"},{"type":"Punctuator","value":"==="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"firstVisible"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"-"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"first"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"last"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderRange"},{"type":"Punctuator","value":"||"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"first"},{"type":"Punctuator","value":":"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"last"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"itemCount"},{"type":"Punctuator","value":"-"},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"last"},{"type":"Punctuator","value":">="},{"type":"Identifier","value":"itemCount"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"console"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"warn"},{"type":"Punctuator","value":"("},{"type":"String","value":"'Invalid render range computing viewability '"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"JSON"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"stringify"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"renderRange"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"itemCount"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"for"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"idx"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"first"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"idx"},{"type":"Punctuator","value":"<="},{"type":"Identifier","value":"last"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"idx"},{"type":"Punctuator","value":"++"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"metrics"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"getFrameMetrics"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"idx"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"metrics"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"continue"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"metrics"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"offset"},{"type":"Punctuator","value":"-"},{"type":"Identifier","value":"scrollOffset"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"metrics"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":"&&"},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":">"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"firstVisible"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"idx"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"_isViewable"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewAreaMode"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewablePercentThreshold"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"metrics"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"idx"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"else"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"firstVisible"},{"type":"Punctuator","value":">="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"break"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"onUpdate"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"itemCount"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"scrollOffset"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"getFrameMetrics"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"index"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"offset"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"createViewToken"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"index"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"isViewable"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Identifier","value":"ViewToken"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"onViewableItemsChanged"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"viewableItems"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"ViewToken"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"changed"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"ViewToken"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Keyword","value":"void"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderRange"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"first"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"last"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":":"},{"type":"Keyword","value":"void"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_config"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"waitForInteraction"},{"type":"Punctuator","value":"&&"},{"type":"Punctuator","value":"!"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_hasInteracted"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"||"},{"type":"Identifier","value":"itemCount"},{"type":"Punctuator","value":"==="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":"||"},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"getFrameMetrics"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"itemCount"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"computeViewableItems"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"itemCount"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"scrollOffset"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"getFrameMetrics"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"renderRange"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_viewableIndices"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":"==="},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":"&&"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_viewableIndices"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"every"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"v"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"ii"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Identifier","value":"v"},{"type":"Punctuator","value":"==="},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"ii"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_viewableIndices"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_config"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"minimumViewTime"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"handle"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"setTimeout"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_timers"},{"type":"Punctuator","value":"."},{"type":"Keyword","value":"delete"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"handle"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_onUpdateSync"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"onViewableItemsChanged"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"createViewToken"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_config"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"minimumViewTime"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_timers"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"add"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"handle"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"else"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_onUpdateSync"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewableIndices"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"onViewableItemsChanged"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"createViewToken"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"resetViewableIndices"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_viewableIndices"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"recordInteraction"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_hasInteracted"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"_onUpdateSync"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewableIndicesToCheck"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"onViewableItemsChanged"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"createViewToken"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"viewableIndicesToCheck"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"viewableIndicesToCheck"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"filter"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ii"},{"type":"Punctuator","value":"=>"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_viewableIndices"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"includes"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ii"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"prevItems"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_viewableItems"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"nextItems"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Map"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewableIndicesToCheck"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"map"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ii"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"viewable"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createViewToken"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ii"},{"type":"Punctuator","value":","},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"viewable"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"key"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewable"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"changed"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"for"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"const"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"key"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewable"},{"type":"Punctuator","value":"]"},{"type":"Identifier","value":"of"},{"type":"Identifier","value":"nextItems"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"prevItems"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"has"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"key"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"changed"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewable"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"for"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"const"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"key"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewable"},{"type":"Punctuator","value":"]"},{"type":"Identifier","value":"of"},{"type":"Identifier","value":"prevItems"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"nextItems"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"has"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"key"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"changed"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"..."},{"type":"Identifier","value":"viewable"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"isViewable"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"false"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"changed"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":">"},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_viewableItems"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"nextItems"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"onViewableItemsChanged"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"viewableItems"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"from"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"nextItems"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"values"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"changed"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewabilityConfig"},{"type":"Punctuator","value":":"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"_config"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"_isViewable"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewAreaMode"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewablePercentThreshold"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"itemLength"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"_isEntirelyVisible"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"else"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"pixels"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"_getPixelsVisible"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"percent"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"100"},{"type":"Punctuator","value":"*"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"viewAreaMode"},{"type":"Punctuator","value":"?"},{"type":"Identifier","value":"pixels"},{"type":"Punctuator","value":"/"},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"pixels"},{"type":"Punctuator","value":"/"},{"type":"Identifier","value":"itemLength"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"percent"},{"type":"Punctuator","value":">="},{"type":"Identifier","value":"viewablePercentThreshold"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"_getPixelsVisible"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"visibleHeight"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"Math"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"min"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"-"},{"type":"Identifier","value":"Math"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"max"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":","},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"Math"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"max"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"visibleHeight"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"_isEntirelyVisible"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"number"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"boolean"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":">="},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":"&&"},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":"<="},{"type":"Identifier","value":"viewportHeight"},{"type":"Punctuator","value":"&&"},{"type":"Identifier","value":"bottom"},{"type":"Punctuator","value":">"},{"type":"Identifier","value":"top"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"module"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"exports"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"ViewabilityHelper"},{"type":"Punctuator","value":";"}]