[{"type":"Keyword","value":"import"},{"type":"Identifier","value":"Vue"},{"type":"Identifier","value":"from"},{"type":"String","value":"'../../dist/vue.runtime.common.js'"},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"from"},{"type":"String","value":"'../../packages/vue-server-renderer'"},{"type":"Keyword","value":"const"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"createRenderer"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'SSR: renderToStream'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should render to a stream'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Template","value":"`\n        <div>\n          <p class=\"hi\">yoyo</p>\n          <div id=\"ho\" :class=\"[testClass, { red: isRed }]\"></div>\n          <span>{{ test }}</span>\n          <input :value=\"test\">\n          <b-comp></b-comp>\n          <c-comp></c-comp>\n        </div>\n      `"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"data"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"test"},{"type":"Punctuator","value":":"},{"type":"String","value":"'hi'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"isRed"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"testClass"},{"type":"Punctuator","value":":"},{"type":"String","value":"'a'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"components"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"bComp"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"render"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"h"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"h"},{"type":"Punctuator","value":"("},{"type":"String","value":"'test-async-2'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"components"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"testAsync2"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"created"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$parent"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$parent"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testClass"},{"type":"Punctuator","value":"="},{"type":"String","value":"'b'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"render"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"h"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"h"},{"type":"Punctuator","value":"("},{"type":"String","value":"'div'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"class"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$parent"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$parent"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testClass"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"String","value":"'test'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"cComp"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"render"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"h"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Identifier","value":"h"},{"type":"Punctuator","value":"("},{"type":"String","value":"'div'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"class"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Keyword","value":"this"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$parent"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testClass"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":","},{"type":"String","value":"'test'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"="},{"type":"String","value":"''"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<div data-server-rendered=\"true\">'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'<p class=\"hi\">yoyo</p> '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'<div id=\"ho\" class=\"a red\"></div> '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'<span>hi</span> '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'<input value=\"hi\"> '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'<div class=\"b\">test</div> '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'<div class=\"b\">test</div>'"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'</div>'"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should catch error'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"config"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"silent"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"true"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"render"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"throw"},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Error"},{"type":"Punctuator","value":"("},{"type":"String","value":"'oops'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'error'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"err"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toString"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toMatch"},{"type":"Punctuator","value":"("},{"type":"RegularExpression","value":"/oops/","regex":{"pattern":"oops","flags":""}},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"config"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"silent"},{"type":"Punctuator","value":"="},{"type":"Boolean","value":"false"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"_"},{"type":"Punctuator","value":"=>"},{"type":"Identifier","value":"_"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should not mingle two components'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"padding"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"20000"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"join"},{"type":"Punctuator","value":"("},{"type":"String","value":"'x'"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"component1"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Template","value":"`<div>${"},{"type":"Identifier","value":"padding"},{"type":"Template","value":"}<div></div></div>`"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"_scopeId"},{"type":"Punctuator","value":":"},{"type":"String","value":"'_component1'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"component2"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Template","value":"`<div></div>`"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"_scopeId"},{"type":"Punctuator","value":":"},{"type":"String","value":"'_component2'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream1"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"component1"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream2"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"component2"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"="},{"type":"String","value":"''"},{"type":"Identifier","value":"stream1"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"text"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"text"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toString"},{"type":"Punctuator","value":"("},{"type":"String","value":"'utf-8'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"replace"},{"type":"Punctuator","value":"("},{"type":"RegularExpression","value":"/x/g","regex":{"pattern":"x","flags":"g"}},{"type":"Punctuator","value":","},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream1"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"String","value":"'_component2'"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream1"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"read"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream2"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"read"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should call context.rendered'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"renderToStream"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"Vue"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"template"},{"type":"Punctuator","value":":"},{"type":"Template","value":"`\n        <div>Hello</div>\n      `"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"rendered"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"42"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"="},{"type":"String","value":"''"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'data'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":"+="},{"type":"Identifier","value":"chunk"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"stream"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"on"},{"type":"Punctuator","value":"("},{"type":"String","value":"'end'"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"res"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toContain"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<div data-server-rendered=\"true\">Hello</div>'"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"a"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Numeric","value":"42"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"done"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"}]