[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'../common'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'assert'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"URL"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"("},{"type":"String","value":"'url'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"relativePath"},{"type":"Punctuator","value":"="},{"type":"String","value":"'../fixtures/es-modules/test-esm-ok.mjs'"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"absolutePath"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"require"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":"("},{"type":"String","value":"'../fixtures/es-modules/test-esm-ok.mjs'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"targetURL"},{"type":"Punctuator","value":"="},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"URL"},{"type":"Punctuator","value":"("},{"type":"String","value":"'file:///'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"targetURL"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"pathname"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"absolutePath"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"expectErrorProperty"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"result"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"propertyKey"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"Promise"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"result"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Keyword","value":"catch"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"error"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"propertyKey"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"expectMissingModuleError"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"result"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectErrorProperty"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"result"},{"type":"Punctuator","value":","},{"type":"String","value":"'code'"},{"type":"Punctuator","value":","},{"type":"String","value":"'MODULE_NOT_FOUND'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"expectOkNamespace"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"result"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"Promise"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"result"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ns"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"expected"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"default"},{"type":"Punctuator","value":":"},{"type":"Boolean","value":"true"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"Object"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"defineProperty"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"expected"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"Symbol"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toStringTag"},{"type":"Punctuator","value":","},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"value"},{"type":"Punctuator","value":":"},{"type":"String","value":"'Module'"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"Object"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"setPrototypeOf"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"expected"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"Object"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"getPrototypeOf"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ns"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"deepStrictEqual"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ns"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"expected"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"expectFsNamespace"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"result"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"Promise"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"resolve"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"result"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"then"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"common"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"mustCall"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"ns"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"ns"},{"type":"Punctuator","value":"."},{"type":"Keyword","value":"default"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"writeFile"},{"type":"Punctuator","value":","},{"type":"String","value":"'function'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"assert"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"strictEqual"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"typeof"},{"type":"Identifier","value":"ns"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"writeFile"},{"type":"Punctuator","value":","},{"type":"String","value":"'function'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"testScriptOrModuleImport"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expectOkNamespace"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"eval"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`import(\"${"},{"type":"Identifier","value":"relativePath"},{"type":"Template","value":"}\")`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expectOkNamespace"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"eval"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`import(\"${"},{"type":"Identifier","value":"relativePath"},{"type":"Template","value":"}\")`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expectOkNamespace"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"eval"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`import(\"${"},{"type":"Identifier","value":"targetURL"},{"type":"Template","value":"}\")`"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expectFsNamespace"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"("},{"type":"String","value":"'fs'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expectFsNamespace"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"eval"},{"type":"Punctuator","value":"("},{"type":"String","value":"'import(\"fs\")'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expectFsNamespace"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"eval"},{"type":"Punctuator","value":"("},{"type":"String","value":"'import(\"fs\")'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expectMissingModuleError"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"("},{"type":"String","value":"'./not-an-existing-module.mjs'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expectMissingModuleError"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"("},{"type":"String","value":"'node:fs'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expectMissingModuleError"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://example.com/foo.js'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"}]