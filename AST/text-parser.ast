[{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"cached"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"from"},{"type":"String","value":"'shared/util'"},{"type":"Keyword","value":"import"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"parseFilters"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"from"},{"type":"String","value":"'./filter-parser'"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"defaultTagRE"},{"type":"Punctuator","value":"="},{"type":"RegularExpression","value":"/\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g","regex":{"pattern":"\\{\\{((?:.|\\r?\\n)+?)\\}\\}","flags":"g"}},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"regexEscapeRE"},{"type":"Punctuator","value":"="},{"type":"RegularExpression","value":"/[-.*+?^${}()|[\\]\\/\\\\]/g","regex":{"pattern":"[-.*+?^${}()|[\\]\\/\\\\]","flags":"g"}},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"buildRegex"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"cached"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"delimiters"},{"type":"Punctuator","value":"=>"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"open"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"delimiters"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"replace"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"regexEscapeRE"},{"type":"Punctuator","value":","},{"type":"String","value":"'\\\\$&'"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"close"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"delimiters"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"replace"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"regexEscapeRE"},{"type":"Punctuator","value":","},{"type":"String","value":"'\\\\$&'"},{"type":"Punctuator","value":")"},{"type":"Keyword","value":"return"},{"type":"Keyword","value":"new"},{"type":"Identifier","value":"RegExp"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"open"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'((?:.|\\\\n)+?)'"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"close"},{"type":"Punctuator","value":","},{"type":"String","value":"'g'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"type"},{"type":"Identifier","value":"TextParseResult"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expression"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"tokens"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"Array"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":"|"},{"type":"Punctuator","value":"{"},{"type":"String","value":"'@binding'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":">"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"export"},{"type":"Keyword","value":"function"},{"type":"Identifier","value":"parseText"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"text"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"delimiters"},{"type":"Punctuator","value":"?"},{"type":"Punctuator","value":":"},{"type":"Punctuator","value":"["},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"string"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"TextParseResult"},{"type":"Punctuator","value":"|"},{"type":"Keyword","value":"void"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"tagRE"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"delimiters"},{"type":"Punctuator","value":"?"},{"type":"Identifier","value":"buildRegex"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"delimiters"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"defaultTagRE"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"!"},{"type":"Identifier","value":"tagRE"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"test"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"text"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"tokens"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"rawTokens"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"["},{"type":"Punctuator","value":"]"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"lastIndex"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"tagRE"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"lastIndex"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"0"},{"type":"Keyword","value":"let"},{"type":"Identifier","value":"match"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"index"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"tokenValue"},{"type":"Keyword","value":"while"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"match"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"tagRE"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"exec"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"text"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"index"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"match"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"index"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"index"},{"type":"Punctuator","value":">"},{"type":"Identifier","value":"lastIndex"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"rawTokens"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"tokenValue"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"text"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"slice"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"lastIndex"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"index"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"tokens"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"JSON"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"stringify"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"tokenValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"const"},{"type":"Identifier","value":"exp"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"parseFilters"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"match"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trim"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"tokens"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Template","value":"`_s(${"},{"type":"Identifier","value":"exp"},{"type":"Template","value":"})`"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"rawTokens"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":"{"},{"type":"String","value":"'@binding'"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"exp"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"lastIndex"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"index"},{"type":"Punctuator","value":"+"},{"type":"Identifier","value":"match"},{"type":"Punctuator","value":"["},{"type":"Numeric","value":"0"},{"type":"Punctuator","value":"]"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"lastIndex"},{"type":"Punctuator","value":"<"},{"type":"Identifier","value":"text"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"length"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"rawTokens"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"tokenValue"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"text"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"slice"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"lastIndex"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Identifier","value":"tokens"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"push"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"JSON"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"stringify"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"tokenValue"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"}"},{"type":"Keyword","value":"return"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expression"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"tokens"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"join"},{"type":"Punctuator","value":"("},{"type":"String","value":"'+'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"tokens"},{"type":"Punctuator","value":":"},{"type":"Identifier","value":"rawTokens"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":"}"}]