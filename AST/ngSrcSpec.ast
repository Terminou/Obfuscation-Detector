[{"type":"String","value":"'use strict'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'ngSrc'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Keyword","value":"var"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"afterEach"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"dealoc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'img[ng-src]'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should not result empty string in img src'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"image"},{"type":"Punctuator","value":"="},{"type":"Punctuator","value":"{"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img ng-src=\"{{image.url}}\">'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"not"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeUndefined"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should sanitize interpolated url'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"imageUrl"},{"type":"Punctuator","value":"="},{"type":"String","value":"'javascript:alert(1);'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img ng-src=\"{{imageUrl}}\">'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'unsafe:javascript:alert(1);'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should sanitize non-interpolated url'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img ng-src=\"javascript:alert(1);\">'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'unsafe:javascript:alert(1);'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should interpolate the expression and bind to src with raw same-domain value'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img ng-src=\"{{id}}\"></img>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeUndefined"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"id"},{"type":"Punctuator","value":"="},{"type":"String","value":"'/somewhere/here'"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'/somewhere/here'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should interpolate a multi-part expression for img src attribute (which requires the MEDIA_URL context)'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img ng-src=\"some/{{id}}\"></img>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"undefined"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"id"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'some/1'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Keyword","value":"if"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"msie"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should update the element property as well as the attribute'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img ng-src=\"{{id}}\"></img>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"prop"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"''"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"dealoc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img ng-src=\"some/\"></img>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"prop"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toMatch"},{"type":"Punctuator","value":"("},{"type":"String","value":"'/some/$'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"dealoc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img ng-src=\"{{id}}\"></img>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"id"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://somewhere/abc'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"prop"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://somewhere/abc'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should work with `src` attribute on the same element'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"imageUrl"},{"type":"Punctuator","value":"="},{"type":"String","value":"'dynamic'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img ng-src=\"{{imageUrl}}\" src=\"static\">'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'static'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'dynamic'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"dealoc"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<img src=\"static\" ng-src=\"{{imageUrl}}\">'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'static'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'dynamic'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"describe"},{"type":"Punctuator","value":"("},{"type":"String","value":"'iframe[ng-src]'"},{"type":"Punctuator","value":","},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should pass through src attributes for the same domain'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<iframe ng-src=\"{{testUrl}}\"></iframe>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testUrl"},{"type":"Punctuator","value":"="},{"type":"String","value":"'different_page'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'different_page'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should error on src attributes for a different domain'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<iframe ng-src=\"{{testUrl}}\"></iframe>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testUrl"},{"type":"Punctuator","value":"="},{"type":"String","value":"'http://a.different.domain.example.com'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$interpolate'"},{"type":"Punctuator","value":","},{"type":"String","value":"'interr'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Can\\'t interpolate: {{testUrl}}\\nError: [$sce:insecurl] Blocked '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'loading resource from url not allowed by $sceDelegate policy.  URL: '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'http://a.different.domain.example.com'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should error on JS src attributes'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<iframe ng-src=\"{{testUrl}}\"></iframe>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testUrl"},{"type":"Punctuator","value":"="},{"type":"String","value":"'javascript:alert(1);'"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$interpolate'"},{"type":"Punctuator","value":","},{"type":"String","value":"'interr'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Can\\'t interpolate: {{testUrl}}\\nError: [$sce:insecurl] Blocked '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'loading resource from url not allowed by $sceDelegate policy.  URL: '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'javascript:alert(1);'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should error on non-resource_url src attributes'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<iframe ng-src=\"{{testUrl}}\"></iframe>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testUrl"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:doTrustedStuff()'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$interpolate'"},{"type":"Punctuator","value":","},{"type":"String","value":"'interr'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Can\\'t interpolate: {{testUrl}}\\nError: [$sce:insecurl] Blocked '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'loading resource from url not allowed by $sceDelegate policy.  URL: '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'javascript:doTrustedStuff()'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should pass through $sce.trustAs() values in src attributes'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<iframe ng-src=\"{{testUrl}}\"></iframe>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"testUrl"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:doTrustedStuff()'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'javascript:doTrustedStuff()'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should interpolate the expression and bind to src with a trusted value'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<iframe ng-src=\"{{id}}\"></iframe>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$digest"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toBeUndefined"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"id"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsResourceUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://somewhere'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toEqual"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://somewhere'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT interpolate a multi-part expression in a `src` attribute that requires a non-MEDIA_URL context'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<iframe ng-src=\"some/{{id}}\"></iframe>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"id"},{"type":"Punctuator","value":"="},{"type":"Numeric","value":"1"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$interpolate'"},{"type":"Punctuator","value":","},{"type":"String","value":"'noconcat'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Error while interpolating: some/{{id}}\\nStrict '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'Contextual Escaping disallows interpolations that concatenate multiple expressions '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"it"},{"type":"Punctuator","value":"("},{"type":"String","value":"'should NOT interpolate a wrongly typed expression'"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"inject"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":","},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"expect"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$compile"},{"type":"Punctuator","value":"("},{"type":"String","value":"'<iframe ng-src=\"{{id}}\"></iframe>'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"("},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"$apply"},{"type":"Punctuator","value":"("},{"type":"Keyword","value":"function"},{"type":"Punctuator","value":"("},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"{"},{"type":"Identifier","value":"$rootScope"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"id"},{"type":"Punctuator","value":"="},{"type":"Identifier","value":"$sce"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"trustAsUrl"},{"type":"Punctuator","value":"("},{"type":"String","value":"'http://somewhere'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Identifier","value":"element"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"attr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'src'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":"."},{"type":"Identifier","value":"toThrowMinErr"},{"type":"Punctuator","value":"("},{"type":"String","value":"'$interpolate'"},{"type":"Punctuator","value":","},{"type":"String","value":"'interr'"},{"type":"Punctuator","value":","},{"type":"String","value":"'Can\\'t interpolate: {{id}}\\nError: [$sce:insecurl] Blocked '"},{"type":"Punctuator","value":"+"},{"type":"String","value":"'loading resource from url not allowed by $sceDelegate policy.  URL: http://somewhere'"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"},{"type":"Punctuator","value":"}"},{"type":"Punctuator","value":")"},{"type":"Punctuator","value":";"}]